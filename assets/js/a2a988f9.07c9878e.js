"use strict";(self.webpackChunkcbl_ionic=self.webpackChunkcbl_ionic||[]).push([[4907],{5389:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=i(4848),t=i(8453);const r={id:"scratch",sidebar_position:4},o="Build an App from Scratch",s={id:"StartHere/scratch",title:"Build an App from Scratch",description:"Get Started",source:"@site/docs/StartHere/scratch.md",sourceDirName:"StartHere",slug:"/StartHere/scratch",permalink:"/StartHere/scratch",draft:!1,unlisted:!1,editUrl:"https://github.com/Couchbase-Ecosystem/cbl-ionic-docs/docs/StartHere/scratch.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"scratch",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Build and Run",permalink:"/StartHere/build-run"},next:{title:"Databases",permalink:"/databases"}},l={},c=[{value:"Get Started",id:"get-started",level:2},{value:"Ionic Documenation",id:"ionic-documenation",level:2},{value:"Install Ionic",id:"install-ionic",level:2},{value:"Create a new Ionic Capacitor App",id:"create-a-new-ionic-capacitor-app",level:2},{value:"Add iOS Support",id:"add-ios-support",level:2},{value:"Add Android Support",id:"add-android-support",level:2},{value:"Update package.json with quality of life improvement commands",id:"update-packagejson-with-quality-of-life-improvement-commands",level:2},{value:"Install cbl-ionic and validate installation",id:"install-cbl-ionic-and-validate-installation",level:2},{value:"Android - Update Gradle file for Couchbase Lite",id:"android---update-gradle-file-for-couchbase-lite",level:2},{value:"Run Verify to validate each platform can build the Native app",id:"run-verify-to-validate-each-platform-can-build-the-native-app",level:2},{value:"Build your mobile app",id:"build-your-mobile-app",level:2},{value:"Running your app",id:"running-your-app",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"build-an-app-from-scratch",children:"Build an App from Scratch"}),"\n",(0,a.jsx)(n.h2,{id:"get-started",children:"Get Started"}),"\n",(0,a.jsxs)(n.p,{children:["To get started coding Couchbase Lite for Ionic Capacitor apps, you will need to make sure you have installed all the pre-requisites on your development machine.  You can find the pre-requisites in the ",(0,a.jsx)(n.a,{href:"/StartHere/prerequisites",children:"Prerequisites"})," page."]}),"\n",(0,a.jsx)(n.h2,{id:"ionic-documenation",children:"Ionic Documenation"}),"\n",(0,a.jsxs)(n.p,{children:["The Ionic documentation for installing a new React App can be found ",(0,a.jsx)(n.a,{href:"https://ionicframework.com/docs/react/your-first-app",children:"here"}),".  The directions below are based on the Ionic documentation.  If discrepancies exist between this document and the Ionic documentation, the Ionic documentation should be used."]}),"\n",(0,a.jsx)(n.h2,{id:"install-ionic",children:"Install Ionic"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install -g @ionic/cli native-run\n"})}),"\n",(0,a.jsx)(n.h2,{id:"create-a-new-ionic-capacitor-app",children:"Create a new Ionic Capacitor App"}),"\n",(0,a.jsxs)(n.p,{children:["This assumes your app name is ",(0,a.jsx)(n.code,{children:"my-app"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"ionic start my-app tabs --type=react --capacitor\n\ncd my-app \n"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"Note the flag at the end states to use Capacitor as the Bridge engine instead of Cordova. This is because the cbl-ionic package requires Capacitor to work."})}),"\n",(0,a.jsx)(n.h2,{id:"add-ios-support",children:"Add iOS Support"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install @capacitor/ios\n\nnpx cap add ios\n"})}),"\n",(0,a.jsx)(n.h2,{id:"add-android-support",children:"Add Android Support"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install @capacitor/android\n\nnpx cap add android\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["You can now open the project in your IDE of choice. It\u2019s recommended to use VSCode or Cursor as they have plugins for Ionic built in: ",(0,a.jsx)(n.a,{href:"https://capacitorjs.com/docs/getting-started/vscode-extension",children:"https://capacitorjs.com/docs/getting-started/vscode-extension"})]})}),"\n",(0,a.jsx)(n.h2,{id:"update-packagejson-with-quality-of-life-improvement-commands",children:"Update package.json with quality of life improvement commands"}),"\n",(0,a.jsx)(n.p,{children:"By default, the package.json file will have some basic commands to build, run and sync your app.  For a better developer experience, you can add the following commands to the package.json file to make it easier to build, run and sync your app."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:' "clean": "rm -rf dist",\n "verify:ios": "cd ios/App && pod install && xcodebuild\n  -workspace App.xcworkspace -scheme App -destination\n   generic/platform=iOS CODE_SIGN_IDENTITY=\\\\\\"\\\\\\"\n    CODE_SIGNING_REQUIRED=NO && cd ../..",\n "verify:android": "cd android && ./gradlew clean build\n  test && cd .."\n'})}),"\n",(0,a.jsx)(n.p,{children:"The commands above will clean the dist folder, verify the iOS project and verify the Android project."}),"\n",(0,a.jsx)(n.h2,{id:"install-cbl-ionic-and-validate-installation",children:"Install cbl-ionic and validate installation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Add cbl-ionic to the project using npm:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install cbl-ionic\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Run build to also generate the web assets according to the Capacitor configuration:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm run build\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Run Capacitor sync:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npx cap sync\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"This will sync the iOS and Android Native projects and set them up so they can build. If you skip this step and try to run a verify first, it will fail with some rather obscure errors."})}),"\n",(0,a.jsx)(n.h2,{id:"android---update-gradle-file-for-couchbase-lite",children:"Android - Update Gradle file for Couchbase Lite"}),"\n",(0,a.jsxs)(n.p,{children:["Update Gradle file with maven for Couchbase Lite - directions can be found ",(0,a.jsx)(n.a,{href:"./install#android---update-the-all-projects-gradle-file",children:"here"}),"."]}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"Skipping this step will result in an error when running verify on the Android project, and thus the Android project will not be able to build."})}),"\n",(0,a.jsx)(n.h2,{id:"run-verify-to-validate-each-platform-can-build-the-native-app",children:"Run Verify to validate each platform can build the Native app"}),"\n",(0,a.jsx)(n.p,{children:"Verify each platform tools are properly installed:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm run verify:ios\n\nnpm run verify:android\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"This is an intensive task - Android can take upwards of 20 minutes to restore all the dependencies if your Gradle cache is empty.  Failures in the verify process are almost always tools related and you must have your computer set up to do iOS and Android builds from the command line."})}),"\n",(0,a.jsx)(n.h2,{id:"build-your-mobile-app",children:"Build your mobile app"}),"\n",(0,a.jsxs)(n.p,{children:["Write awesome code to build your super awesome mobile app. Ionic has a very good set of ",(0,a.jsx)(n.a,{href:"https://ionicframework.com/react",children:"React Components"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"running-your-app",children:"Running your app"}),"\n",(0,a.jsx)(n.p,{children:"Once you are ready to run, helpful commands include:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"ionic capacitor run ios --external -l \n\nionic capacitor run android -l --external\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Note that you can target a specific device.\n",(0,a.jsx)(n.strong,{children:"iOS"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"ionic capacitor run ios --external -l --target=6C2D0BF0-6D13-4F4C-A452-03B707A2DC9B\n"})}),"\n",(0,a.jsx)(n.p,{children:"For iOS you must provide the UUID for the device you want to use. To find your iOS simulator UUID:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"xcrun simctl list devices\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Android"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"ionic capacitor run android -l --external --target=API_35\n"})}),"\n",(0,a.jsx)(n.p,{children:"For Android emulators, it\u2019s the device name and if there are spaces you must replace the spaces with underscore - see example above where my emulator is named API 35 so I must target it as the name API_35.List all available AVDs, so to see their names:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"emulator -list-avds\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"Note: To run the emulator -list-avds command, ensure that your Android SDK tools are correctly configured in your system's PATH and that you have created virtual devices using the Android Virtual Device (AVD) Manager. This command lists available emulators but does not start them."})}),"\n",(0,a.jsx)(n.p,{children:"Example output:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"Pixel_4_API_33\nPixel_6_Pro_API_34\n"})}),"\n",(0,a.jsx)(n.p,{children:"Now you can target a specific device using:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npx cap run android --target=Pixel_6_Pro_API_34\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>s});var a=i(6540);const t={},r=a.createContext(t);function o(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);